<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Absen</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="stylesheet" type="text/css" href="css/sidebar.css">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">

        handlePermission(this);

        function handlePermission(geoBtn) {
            navigator.permissions.query({name:'geolocation'}).then(function(result) {
                if( result.state == 'prompt' || result.state == 'granted' )
                {
                    navigator.geolocation.getCurrentPosition(revealPosition,showErrorLocation);
                }else{
                    console.log( result.state );
                }
                result.onchange = function() {
                    console.log(result.state);
                }
            });
        }

        function revealPosition(position) {
            var data = position.coords;
            var lat  = data.latitude;
            var long = data.longitude;
            alert("Lat : " + lat + ", Long: " + long );
        }

        function showErrorLocation(error) {
            switch(error.code) {
            case error.PERMISSION_DENIED:
                var err = "User denied the request for Geolocation."
                break;
            case error.POSITION_UNAVAILABLE:
                var err = "Location information is unavailable."
                break;
            case error.TIMEOUT:
                var err = "The request to get user location timed out."
                break;
            case error.UNKNOWN_ERROR:
                var err = "An unknown error occurred."
                break;
            }
            console.log(err);
        }
    </script>
</head>

<body>
    <div class="sidebar">
        <header>Geo Attendance</header>
        <ul>
            <li><a href="dashboard.html"><i class="fas fa-qrcode"></i>Dashboard</a></li>
            <li><a href="DataSiswa.html"><i class="fas fa-user"></i>Data Siswa</a></li>
            <li><a href="DataGuru.html"><i class="fas fa-user"></i>Data Guru</a></li>
            <li><a href="absen.html"><i class="far fa-envelope"></i>Absen</a></li>
            <li><a href="#"><i class="fas fa-calendar-week"></i>Rekap Absensi</a></li>
            <li><a href="index.html"><i class="fa-window-close"></i>Keluar</a></li>
        </ul>
    </div>
    <div class="main">
        <div class="top-bar">
            <div class="search">
                <input type="text" name="search" placeholder="Search">
                <label for="search"><i class="fas fa-search"></i></label>
            </div>
            <i class="fas fa-bell"></i>
            <div class="user">
                <img src="assets/avatar.svg">
            </div>
        </div>
        <h1 class="title-ds">Absen</h1>

        <div id="googleMap" style="width:100%;height:380px;"></div>
    </div>
</body>

</html>